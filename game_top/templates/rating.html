{% extends 'base.html'%}

{% block content %}
<div class="rating-page">
<div class="container-rate">
    <div class="form-header">
        <span class="help-icon">?</span>
        <div class="modal">
            <div class="modal-content">
                <span class="close-btn">&times;</span>
                <div class="criteria-description">
                    <div class="criteria-item">
                        <div class="criteria-number">1</div>
                        <div class="criteria-content">
                            <h3>ОРИГИНАЛЬНОСТЬ:</h3>
                            <p>Оценка включает уникальность игровых механик, свежесть идей и инновационный подход. Высший балл получают проекты, предлагающие что-то действительно новое в жанре или создающие свой собственный поджанр. При этом простое копирование существующих механик может получить минимальную оценку.</p>
                        </div>
                    </div>

                    <div class="criteria-item">
                        <div class="criteria-number">2</div>
                        <div class="criteria-content">
                            <h3>ГЕЙМПЛЕЙ:</h3>
                            <p>Оценка включает в себя совокупность двух параметров: 1. Механики - качество и разнообразие игровых механик, их взаимодействие между собой 2. Баланс - насколько хорошо сбалансированы все элементы игры для создания увлекательного игрового процесса.</p>
                        </div>
                    </div>

                    <div class="criteria-item">
                        <div class="criteria-number">3</div>
                        <div class="criteria-content">
                            <h3>СЮЖЕТ:</h3>
                            <p>Оценка охватывает качество повествования, глубину проработки персонажей и мира, логичность развития событий. Учитывается как основная сюжетная линия, так и побочные квесты, предыстория мира и дополнительные сюжетные материалы. Высокие баллы получают игры с оригинальным, глубоким и последовательным повествованием.</p>
                        </div>
                    </div>

                    <div class="criteria-item">
                        <div class="criteria-number">4</div>
                        <div class="criteria-content">
                            <h3>ТЕХНИЧЕСКОЕ СОСТОЯНИЕ:</h3>
                            <p> Оценка включает стабильность работы игры, наличие или отсутствие багов, оптимизацию и производительность. Максимальный балл получают технически безупречные проекты.</p>
                        </div>
                    </div>

                    <div class="criteria-item">
                        <div class="criteria-number">5</div>
                        <div class="criteria-content">
                            <h3>ГРАФИКА/ВИЗУАЛЬНЫЙ СТИЛЬ:</h3>
                            <p> Оценивается не только технологическая составляющая графики, но и общая визуальная эстетика, художественный стиль, дизайн персонажей и окружения. Высокие оценки могут получить как технологически продвинутые проекты, так и игры с уникальным художественным видением.</p>
                        </div>
                    </div>

                    <div class="criteria-item">
                        <div class="criteria-number">6</div>
                        <div class="criteria-content">
                            <h3>ЗВУКИ:</h3>
                            <p>Оценка включает качество звуковых эффектов, их уместность и разнообразие. Учитывается реалистичность или стилистическое соответствие звуков, качество озвучки персонажей и общее звуковое оформление игрового мира.</p>
                        </div>
                    </div>

                    <div class="criteria-item">
                        <div class="criteria-number">7</div>
                        <div class="criteria-content">
                            <h3>МУЗЫКА:</h3>
                            <p> Оценивается качество музыкального сопровождения, его соответствие атмосфере игры и ситуациям. Учитывается как оригинальный саундтрек, так и подбор лицензированной музыки, если она используется. Важны разнообразие композиций и их способность усиливать эмоциональное воздействие игры.</p>
                        </div>
                    </div>

                    <div class="criteria-item">
                        <div class="criteria-number">8</div>
                        <div class="criteria-content">
                            <h3>ДИЗАЙН:</h3>
                            <p>Оценка охватывает три ключевых аспекта: 1. Геймдизайн - проработанность игровых механик, их взаимодействие между собой, баланс сложности, выстраивание кривой обучения игрока, продуманность систем прогрессии и вознаграждений 2. Левел-дизайн - качество проектирования игровых локаций, их структура и планировка, расположение препятствий и наград, организация игрового пространства для создания интересных игровых ситуаций, темпоритм прохождения 3. UI/UX дизайн - качество пользовательского интерфейса, удобство меню, интуитивность навигации и общая эргономика. Высокие баллы получают проекты, где все аспекты дизайна работают гармонично, создавая комфортный и увлекательный игровой опыт.</p>
                        </div>
                    </div>

                    <div class="criteria-item">
                        <div class="criteria-number">9</div>
                        <div class="criteria-content">
                            <h3>АТМОСФЕРА:</h3>
                            <p> Оценивается способность игры создавать определённое настроение и погружать игрока в свой мир. Учитывается совокупность всех элементов: визуальный стиль, звук, музыка, повествование и их гармоничное взаимодействие для создания целостной атмосферы.</p>
                        </div>
                    </div>

                    <div class="criteria-item">
                        <div class="criteria-number">10</div>
                        <div class="criteria-content">
                            <h3>ОБЩЕЕ ВПЕЧАТЛЕНИЕ:</h3>
                            <p> Субъективная оценка, отражающая общее восприятие игры как целостного произведения. Учитывается, насколько успешно игра достигает поставленных целей, насколько запоминающимся получился опыт и какое послевкусие оставляет проект после прохождения. </p>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
<form method="post">
<div class="criteria-name">
            <label>Название игры:</label>
            {{ form.game_name() }}
        </div>
    <div class="criteria-container">
            <div class="criteria">
                <label> Оригинальность:</label>
                {{ form.originality() }} {{ form.hidden_tag() }}
                <span id="originalityValue"> {{ form.originality.data }}</span>
            </div>
            <div class="criteria">
                <label> Геймплей:</label>
                {{ form.gameplay() }} {{ form.hidden_tag() }}
                <span id="gameplayValue"> {{ form.gameplay.data }}</span>
            </div>
            <div class="criteria">
                <label> Сюжет:</label>
                {{ form.story() }} {{ form.hidden_tag() }}
                <span id="storyValue"> {{ form.story.data }}</span>
            </div>
            <div class="criteria">
                <label> Техническое состояние:</label>
                {{ form.bugs() }} {{ form.hidden_tag() }}
                <span id="bugsValue"> {{ form.bugs.data }}</span>
            </div>
            <div class="criteria">
                <label> Графика/виз.стиль:</label>
                {{ form.graphics() }} {{ form.hidden_tag() }}
                <span id="graphicsValue"> {{ form.graphics.data }}</span>
            </div>
            <div class="criteria">
                <label> Звуки:</label>
                {{ form.sound() }} {{ form.hidden_tag() }}
                <span id="soundValue"> {{ form.sound.data }}</span>
            </div>
            <div class="criteria">
                <label> Музыка:</label>
                {{ form.music() }} {{ form.hidden_tag() }}
                <span id="musicValue"> {{ form.music.data }}</span>
            </div>
            <div class="criteria">
                <label> Дизайн:</label>
                {{ form.design() }} {{ form.hidden_tag() }}
                <span id="designValue"> {{ form.design.data }}</span>
            </div>
            <div class="criteria">
                <label> Атмосфера:</label>
                {{ form.atmosphere() }} {{ form.hidden_tag() }}
                <span id="atmosphereValue"> {{ form.atmosphere.data }}</span>
            </div>
        <div class="criteria">
                <label> Общее впечатление:</label>
                {{ form.general_impression() }} {{ form.hidden_tag() }}
                <span id="general_impressionValue"> {{ form.general_impression.data }}</span>
            </div>
    </div>
    {{ form.submit() }}
</form>
<p id="totalScore" class="score-circle" align="center"></p>
</div>
</div>


<script>
// Оптимизированная функция обновления значений
function updateValue(element) {
    const id = element.id + "Value";
    const valueElement = document.getElementById(id);
    const newValue = parseInt(element.value);

    // Быстрое обновление значения без анимации для улучшения производительности
    valueElement.innerText = newValue;
    updateTotalScore();
}

// Оптимизированная функция подсчета общего балла
function updateTotalScore() {
    const criteria = [
        'originality', 'gameplay', 'story', 'bugs',
        'graphics', 'sound', 'music', 'design',
        'atmosphere', 'general_impression'
    ];

    const totalScore = criteria.reduce((sum, criterion) => {
        return sum + parseInt(document.getElementById(criterion).value || 0);
    }, 0);

    const scoreElement = document.getElementById('totalScore');
    scoreElement.innerText = totalScore;

    // Определяем цвет на основе процента
    const maxScore = criteria.length * 10;
    const percentage = (totalScore / maxScore) * 100;

    scoreElement.style.background = percentage >= 70 ? '#10B981'
                                 : percentage >= 40 ? '#F59E0B'
                                 : '#EF4444';
}

// Инициализация при загрузке
document.addEventListener('DOMContentLoaded', () => {
    const ranges = document.querySelectorAll('input[type="range"]');
    ranges.forEach(updateValue);

    // Добавляем плавное появление
    const container = document.querySelector('.container-rate');
    container.style.opacity = '0';
    requestAnimationFrame(() => {
        container.style.transition = 'opacity 0.3s ease';
        container.style.opacity = '1';
    });
});

    document.addEventListener('DOMContentLoaded', function() {
    const helpIcon = document.querySelector('.help-icon');
    const modal = document.querySelector('.modal');
    const closeBtn = document.querySelector('.close-btn');

    helpIcon.addEventListener('click', () => {
        modal.style.display = 'block';
    });

    closeBtn.addEventListener('click', () => {
        modal.style.display = 'none';
    });

    window.addEventListener('click', (e) => {
        if (e.target === modal) {
            modal.style.display = 'none';
        }
    });
});
</script>


{% endblock %}

